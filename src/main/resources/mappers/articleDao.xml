<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.icia.wapoo.dao.ArticleDao">

<resultMap id="ArticleResultMap" type="com.icia.web.model.ArticleNotice">
   <id column="articleId" property="articleId" />
   <result column="regDate" property="regDate" />
   <result column="updateDate" property="updateDate" />
   <result column="title" property="title" />
   <result column="body" property="body" />
   <result column="hit" property="hit" />
   <result column="status" property="status" />
   <result column="parant_id" property="parant_id" />
   <result column="board_id" property="board_id" />
   <result column="writer_id" property="writer_id" />
</resultMap>
	
	<select id="NoticeListCount" parameterType="ArticleNotice" resultType="long">
	SELECT	
	IFNULL(articleId, '') AS articleId,
	IFNULL(regDate, '') AS regDate,
	updateDate,
	title,
	BODY,
	hit,
	STATUS,
	IFNULL(parant_id, 0) AS parant_id,
	board_id,
	writer_id
FROM article
WHERE articleId = #{value}
	</select>
	
	<!-- 리스트 가져오기 -->
    <select id="NoticeList" parameterType="com.icia.wapoo.model.ArticleNotice" resultMap="ArticleResultMap">
    	SELECT *
	FROM article
    </select>
    <!-- 글 조회 -->
    <select id="boardSelect" parameterType="long" resultMap="ArticleResultMap">
    	SELECT	IFNULL(articleId, '') AS articleId,
	IFNULL(regDate, '') AS regDate,
	updateDate,
	title,
	BODY,
	hit,
	STATUS,
	IFNULL(parant_id, 0) AS parant_id,
	board_id,
	writer_id
FROM article
WHERE articleId = 2
    </select>
    
    <!-- 글 등록 -->
    <insert id="boardInsert" parameterType="Article">
    	<selectKey resultType="long" keyProperty="articleId" order="BEFORE">
		   SELECT articleId.NEXTVAL FROM DUAL
		</selectKey>
INSERT	INTO article(	
			articleId,
			regDate,
			updateDate,
			title,
			BODY,
			hit,
			STATUS,
			
			board_id,
			writer_id)
		VALUES
			(#{Article.writerId},
			NOW(),
			NOW(),
			#{Article.title},
			#{Article.body},
			#{Article.boardId},
			#{Article.writerId},
			
			2,
			3);
    </insert>
    
    <!-- 글 삭제 -->
    <delete id="boardDelete" parameterType="long">
		DELETE FROM article
			WHERE articleId =#{value}

	</delete>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
</mapper>
